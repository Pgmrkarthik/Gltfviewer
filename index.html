<!DOCTYPE html>
<html lang="en">

<head>
  <title>3D Model-viewer</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href='https://fonts.googleapis.com/css?family=Akronim' rel='stylesheet'>

  <link rel="stylesheet" href="style.css">
  <!-- Loads <model-viewer> for modern browsers: -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.js">
  </script>

  <!-- Loads <model-viewer> for old browsers like IE11: -->
  <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js">
  </script>
  <!-- The following libraries and polyfills are recommended to maximize browser support -->
  <!-- NOTE: you must adjust the paths as appropriate for your project -->

  <!-- 游뚿 REQUIRED: Web Components polyfill to support Edge and Firefox < 63 -->
  <script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.1.3/webcomponents-loader.js"></script>

  <!-- 游누 OPTIONAL: Intersection Observer polyfill for better performance in Safari and IE11 -->
  <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>

  <!-- 游누 OPTIONAL: Resize Observer polyfill improves resize behavior in non-Chrome browsers -->
  <script src="https://unpkg.com/resize-observer-polyfill@1.5.1/dist/ResizeObserver.js"></script>

  <!-- 游누 OPTIONAL: Fullscreen polyfill is required for experimental AR features in Canary -->
  <!--<script src="https://unpkg.com/fullscreen-polyfill@1.0.2/dist/fullscreen.polyfill.js"></script>-->

  <!-- 游누 OPTIONAL: Include prismatic.js for Magic Leap support -->
  <!--<script src="https://unpkg.com/@magicleap/prismatic@0.18.2/prismatic.min.js"></script>-->

  <script src="app/main.js" type="text/javascript"></script>
</head>
<body>
  <!-- <form id="dropFileForm">
    <input type="file" name="files[]" id="fileInput" multiple >
  
    <label for="fileInput" id="fileLabel" ondragover="overrideDefault(event);fileHover();" ondragenter="overrideDefault(event);fileHover();" ondragleave="overrideDefault(event);fileHoverEnd();" ondrop="overrideDefault(event);fileHoverEnd();addFiles(event)">
      <i class="fa fa-download fa-5x"></i>
      <br>
      <span id="fileLabelText">
        Browse a file or drag it here
      </span>
      <br>
      <span id="uploadStatus"></span>
    </label>
  
    
  </form> -->
  <h2 id="model-name">Modem</h2>
  <div id="container-1">
 <div id="model-viewer">
   <div id="inner">
  <model-viewer  src="assets/3DModels/NewModem.glb" 
    shadow-intensity="1" auto-rotate camera-controls alt="A 3D model of an astronaut" magic-leep ar ar-scale="auto" ios-src="1Modem.usdz" magic-leap unstable-webxr
    quick-look-browsers="Safari chrome"
    >
  </model-viewer>
</div>
</div>
<div id="dmodel-viewer"></div>
</div>
<form id="dropFileForm">
  <input type="file" name="files[]" id="fileInput" multiple >

  <label for="fileInput" id="fileLabel" ondragover="overrideDefault(event);fileHover();" ondragenter="overrideDefault(event);fileHover();" ondragleave="overrideDefault(event);fileHoverEnd();" ondrop="overrideDefault(event);fileHoverEnd();addFiles(event)">
    <i class="fa fa-download fa-5x"></i>
    <br>
    <span id="fileLabelText">
      Browse / Drag it here
    </span>
    <br>
    <span id="uploadStatus"></span>
  </label>

  
</form>
</body>
<script>
var dropFileForm = document.getElementById("dropFileForm");
var fileLabelText = document.getElementById("fileLabelText");
var uploadStatus = document.getElementById("uploadStatus");
var fileInput = document.getElementById("fileInput");
var droppedFiles;

function overrideDefault(event) {
  event.preventDefault();
  event.stopPropagation();
}

function fileHover() {
  dropFileForm.classList.add("fileHover");
}

function fileHoverEnd() {
  dropFileForm.classList.remove("fileHover");
}

function addFiles(event) {
  droppedFiles = event.target.files || event.dataTransfer.files;
  showFiles(droppedFiles);
}

function showFiles(files) {
  if (files.length > 1) {
    fileLabelText.innerText = files.length + " files selected";
  } else {
    
    if ( document.getElementById("model-viewer")) {
        document.getElementById("model-viewer").remove();
      }
      var modelNameTag =document.getElementById("model-name");
      var modelName = files[0].name;
      modelName = modelName.substring(0,modelName.indexOf('.'))
      modelNameTag.innerText = modelName
      var Model2 = document.getElementById("dmodel-viewer")
      var model = URL.createObjectURL(files[0]);
      var model_viewertag = '<model-viewer ar src="' + model + '" shadow-intensity="1" auto-rotate camera-controls alt=""></model-viewer>'
      Model2.innerHTML = model_viewertag;
    
  }
}

// function uploadFiles(event) {
//   event.preventDefault();
//   changeStatus("Uploading...");

//   var formData = new FormData();

//   for (var i = 0, file; (file = droppedFiles[i]); i++) {
//     formData.append(fileInput.name, file, file.name);
//   }

//   var xhr = new XMLHttpRequest();
//   xhr.onreadystatechange = function(data) {
//     //handle server response and change status of
//     //upload process via changeStatus(text)
//     console.log(xhr.response);
//   };
//   xhr.open(dropFileForm.method, dropFileForm.action, true);
//   xhr.send(formData);
// }

// function changeStatus(text) {
//   uploadStatus.innerText = text;
// }

</script>
</html>
